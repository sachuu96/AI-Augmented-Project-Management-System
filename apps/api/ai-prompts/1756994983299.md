prompt - I am building a product management system using Node.js, Express and PostgreSQL with an event-driven architecture. I want to generate a scaffolded, modular application that supports CRUD operations for products, SSE notifications, and event publishing Kafka. Include worker threads to offload event publishing task. Letâ€™s break it down into smaller prompts for iterative development. 

First create a PostgreSQL products table based on the OpenAPI schema given below. Include a trigger to auto-update updatedAt. Also, provide a Node.js db.ts module using pg to connect to the database and execute queries. No need to use any ORM. Include error handling express middleware also. 

please consider below openAPI definition as the contract

<shared-my-openAPI.yml>


What I accepted/modified
------------------------

- updated the given code to maintain 3 layer architecture (controller, service and model layer)